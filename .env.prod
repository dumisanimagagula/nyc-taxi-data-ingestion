# NYC Taxi Lakehouse - PRODUCTION Environment
# =============================================
# Production configuration with maximum security and resources

ENVIRONMENT=prod
PROJECT_NAME=nyc-taxi-lakehouse-prod
COMPOSE_PROJECT_NAME=lakehouse-prod

# Storage (CHANGE THESE!)
MINIO_ROOT_USER=minio
MINIO_ROOT_PASSWORD=CHANGE_THIS_STRONG_PASSWORD_123!
AWS_ACCESS_KEY_ID=minio
AWS_SECRET_ACCESS_KEY=CHANGE_THIS_STRONG_PASSWORD_123!
AWS_ENDPOINT_URL=http://minio:9000
AWS_REGION=us-east-1

# Metastore (CHANGE THESE!)
METASTORE_DB_USER=hive
METASTORE_DB_PASSWORD=CHANGE_THIS_STRONG_PASSWORD_456!
METASTOREDB_NAME=metastore
HIVE_METASTORE_URI=thrift://hive-metastore:9083

# Spark (Maximum resources)
SPARK_MASTER_URL=spark://spark-master:7077
SPARK_WORKER_CORES=8
SPARK_WORKER_MEMORY=16g
SPARK_WORKER_INSTANCES=2
SPARK_DRIVER_MEMORY=4g
SPARK_EXECUTOR_MEMORY=12g

# Trino (Maximum resources)
TRINO_COORDINATOR_MEMORY=8GB
TRINO_WORKER_MEMORY=8GB

# Superset (CHANGE THESE!)
SUPERSET_DB_USER=superset
SUPERSET_DB_PASSWORD=CHANGE_THIS_STRONG_PASSWORD_789!
SUPERSET_DB_NAME=superset
SUPERSET_SECRET_KEY=CHANGE_THIS_SECRET_KEY_MINIMUM_32_CHARS_RANDOM_STRING_123456789
SUPERSET_ADMIN_USERNAME=admin
SUPERSET_ADMIN_PASSWORD=CHANGE_THIS_ADMIN_PASSWORD_ABC!
SUPERSET_LOAD_EXAMPLES=false

# Airflow (CHANGE THESE!)
AIRFLOW_DB_USER=airflow
AIRFLOW_DB_PASSWORD=CHANGE_THIS_STRONG_PASSWORD_DEF!
AIRFLOW_DB_NAME=airflow
AIRFLOW_ADMIN_USERNAME=airflow
AIRFLOW_ADMIN_PASSWORD=CHANGE_THIS_ADMIN_PASSWORD_XYZ!
AIRFLOW_ADMIN_EMAIL=admin@company.com
AIRFLOW__CORE__EXECUTOR=LocalExecutor
AIRFLOW__CORE__LOAD_EXAMPLES=false
AIRFLOW__CORE__DAGS_ARE_PAUSED_AT_CREATION=true

# Resource Limits (Maximum)
MINIO_CPU_LIMIT=2.0
MINIO_MEM_LIMIT=4g
MINIO_MEM_RESERVATION=2g

POSTGRES_CPU_LIMIT=2.0
POSTGRES_MEM_LIMIT=4g
POSTGRES_MEM_RESERVATION=2g

SPARK_MASTER_CPU_LIMIT=4.0
SPARK_MASTER_MEM_LIMIT=8g
SPARK_MASTER_MEM_RESERVATION=4g

SPARK_WORKER_CPU_LIMIT=8.0
SPARK_WORKER_MEM_LIMIT=20g
SPARK_WORKER_MEM_RESERVATION=16g

TRINO_CPU_LIMIT=8.0
TRINO_MEM_LIMIT=16g
TRINO_MEM_RESERVATION=8g

SUPERSET_CPU_LIMIT=4.0
SUPERSET_MEM_LIMIT=8g
SUPERSET_MEM_RESERVATION=4g

AIRFLOW_WEBSERVER_CPU_LIMIT=2.0
AIRFLOW_WEBSERVER_MEM_LIMIT=4g
AIRFLOW_WEBSERVER_MEM_RESERVATION=2g

AIRFLOW_SCHEDULER_CPU_LIMIT=4.0
AIRFLOW_SCHEDULER_MEM_LIMIT=4g
AIRFLOW_SCHEDULER_MEM_RESERVATION=2g

# Port Mappings
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001
SPARK_MASTER_PORT=7077
SPARK_MASTER_UI_PORT=8080
TRINO_UI_PORT=8086
SUPERSET_PORT=8088
AIRFLOW_PORT=8089
METASTORE_PORT=9083

# Healthcheck (Production - Conservative)
HEALTHCHECK_INTERVAL=30s
HEALTHCHECK_TIMEOUT=10s
HEALTHCHECK_RETRIES=5
HEALTHCHECK_START_PERIOD=90s

# Restart Policy (Always running in production)
RESTART_POLICY=unless-stopped

# Logging (Production - Maximum retention)
LOG_DRIVER=json-file
LOG_MAX_SIZE=20m
LOG_MAX_FILE=10

# Monitoring (Enabled for production)
ENABLE_MONITORING=true
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
GRAFANA_ADMIN_PASSWORD=CHANGE_THIS_GRAFANA_PASSWORD_999!

# Security (Maximum security)
ENFORCE_HTTPS=true
SSL_CERT_PATH=/etc/ssl/certs/cert.pem
SSL_KEY_PATH=/etc/ssl/private/key.pem

# Backup (Production - Daily with long retention)
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_LOCATION=/backups

# Performance Tuning
ENABLE_QUERY_CACHING=true
QUERY_CACHE_TTL=3600

# Alerting
ENABLE_ALERTING=true
ALERT_EMAIL=alerts@company.com
ALERT_SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
